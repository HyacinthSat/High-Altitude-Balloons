# 项目开发与测试日志

---

## 📅 2025/06/21

### ✅ 测试日志

#### 气球固件部分

1. [有待调整]  `payload` 参数结构不便于阅读  
2. [严重故障]  NACK 命令存在失效的情况  
3. [严重故障]  图像传输期间命令完全不响应  
4. [严重故障]  温度在最开始遥测帧中正常，后续固定为 53.33℃  
5. [非预期行为] 第一张图编号为 0，被误判为 ERR_NONE，未进行传输  
6. [非预期行为] 修改画幅与周期后图像连发，疑似调制完成过快导致休眠时链路仍未发送完  

✅ **已修复：** 1, 2, 3, 4, 5, 6

---

## 📅 2025/06/22

### ✅ 开发日志

#### 错误修复记录


1. [完成] 重构了 `payload` 参数         
2. [完成] 修复了应答流程  
3. [完成] 修复图像传输期间命令不响应逻辑  
4. [鸽了] 问题暂未查明，交付后期处理  
5. [完成] 与 `payload` 重构一并解决  
6. [成功] 新增队列检查机制，确保发送完成后才进入周期延时  

---

### ✅ 测试日志

#### 气球固件部分

1. [非预期行为] 转发器文本格式存在问题  
2. [非预期行为] GPS 指示器显示为 “~”  
3. [非预期行为] 降级状态下图像帧并非最新  
4. [非预期行为] SSDV 调制结束但未发送完，结束标记插队  
5. [非预期行为] 图传期间命令响应延迟到图传结束后才发送  
6. [非预期行为] 内部温度传感器误差大，室温 30℃ 时显示近 50℃  
7. [非预期行为] 中继关闭期间不收但也不丢弃消息，恢复后读出积压数据  
8. [严重故障]   遥测温度固定为 53.33℃，注释掉电压 ADC 后恢复  

✅ **已修复：** 1, 2, 3, 4, 5, 7, 8  
🚫 **不予处理：** 6（误差属设计固有限制）

---

#### CDTU 固件部分

- [严重故障] 长时间待机后串口设备没有发挥作用

✅ **已修复** 

---

#### 地面站部分

1. [非预期行为] 串口连接失败时未弹窗提示  
2. [非预期行为] 曾尝试连接过的串口断开时仍会弹出提示  

---

#### 其他硬件

- [修复查明] GPS 故障已确认为由天线引起

---

### 📌 TODO

- [ ] 降级状态下图像帧的实时性检查  
- [ ] 开发命令上注加密与鉴权机制

---

## 📅 2025/06/23

### ✅ 开发日志

#### 错误修复记录

1. [完成] 修复转发器逻辑，删除错误的 `CALLSIGN` 字段  
2. [完成] 修复字面量类型错误，重构 DEBUG_MODE 逻辑  
3. [完成] 删除帧降级机制，经测试确认无风险  
4. [完成] 调整错误的状态通知位置，修复结束标记时机  
5. [完成] 增加高优先级数据插队机制  
6. [放弃] 温度误差为正常范围，暂不处理  
7. [完成] 优化中继数据接收逻辑  
8. [完成] 使用寄存器重置方式解决温度传感器无效问题

---

## 📅 2025/06/25

### ✅ 测试日志

#### 气球固件部分

- [严重错误] 图像传输接近末尾时发生丢帧或帧错误

---

## 📅 2025/06/26 - 2025/06/27

### ✅ 开发日志

#### 错误修复记录

- [完成] 经测试，确认图传问题由降低 CPU 频率引起波特率紊乱，予以500ms延时